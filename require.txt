###############################
# .env TEMPLATE (EXAMPLE)
###############################
# Slack API Tokens (Required)
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_APP_TOKEN=xapp-your-app-token-here

# Slack App Credentials (from App Credentials page)
SLACK_APP_ID=your-app-id-here
SLACK_CLIENT_ID=your-client-id-here
SLACK_CLIENT_SECRET=your-client-secret-here
SLACK_SIGNING_SECRET=your-signing-secret-here
SLACK_VERIFICATION_TOKEN=your-verification-token-here


# Notion API (for exporting to Notion)
NOTION_TOKEN=secret_your_notion_token
NOTION_PARENT_PAGE_ID=your-parent-page-id

# Gmail API (for Gmail integration)
GMAIL_CREDENTIALS_FILE=credentials/gmail_credentials.json
GMAIL_TOKEN_FILE=data/gmail_token.pickle


# Real-time streaming
SOCKET_MODE_ENABLED=true
MAX_RECONNECT_ATTEMPTS=10

WORKSPACE_NAME=your-workspace
WORKSPACE_ID=T12345678


=======================================================================
1. SLACK API SETUP
=======================================================================

---
Step 1: Create a Slack App
---
1. Go to the Slack API portal:
   - https://api.slack.com/apps
2. Click "Create New App" -> "From scratch".
3. Set:
   - App name: e.g. Workforce Agent
   - Workspace: your Slack workspace
4. Click "Create App".

---
Step 2: Configure OAuth Scopes (Bot Token)
---
OAuth scopes control what the bot can do.

1. In the left sidebar, go to "OAuth & Permissions".
2. Scroll to "Scopes" -> "Bot Token Scopes".
3. Add read-focused scopes:
   - users:read – view users in workspace
   - users:read.email – view user email addresses (optional)
   - team:read – view workspace info
   - channels:read – view public channels
   - channels:history – view messages in public channels
   - groups:read – view private channels the bot is in
   - groups:history – view messages in private channels
   - im:read – view direct messages with the bot
   - im:history – view DM history
   - mpim:read – view group DMs
   - mpim:history – view group DM history
   - files:read – view files
   - reactions:read – view reactions

---
Step 3: Enable Socket Mode
---
Socket Mode lets the agent receive real-time events.

1. In the left sidebar, go to "Socket Mode".
2. Toggle "Enable Socket Mode" to ON.
3. When prompted, click "Generate" to create an app-level token.
   - Name it e.g. Socket Mode Token.
4. Copy the token (starts with xapp-).
5. Add to .env (see template above):
   - SLACK_APP_TOKEN=xapp-your-app-token-here

---
Step 4: Subscribe to Events
---
Navigate to Event Subscriptions

Left sidebar → "Event Subscriptions"
Enable Events

Toggle "Enable Events" to ON
Subscribe to Bot Events Scroll to "Subscribe to bot events" → Click "Add Bot User Event"

Add these events:

message.channels - Messages in public channels
message.groups - Messages in private channels
message.im - Direct messages
message.mpim - Group DMs
reaction_added - Reactions added
reaction_removed - Reactions removed
file_shared - Files shared
member_joined_channel - User joins channel
member_left_channel - User leaves channel
Save Changes

Click "Save Changes" at bottom

---
Step 5: Install App to Workspace
---
1. In the left sidebar, go to "Install App".
2. Click "Install to Workspace".
3. Review the permissions and click "Allow".
4. After installation you will see "Bot User OAuth Token" – copy it:
   - Starts with xoxb-
5. Add to .env:
   - SLACK_BOT_TOKEN=xoxb-your-bot-token-here

---
Step 6: Get Additional App Credentials
---
1. Go to "Basic Information" in the left sidebar.
2. Under "App Credentials", copy:
   - App ID -> SLACK_APP_ID
   - Client ID -> SLACK_CLIENT_ID
   - Client Secret -> SLACK_CLIENT_SECRET
   - Signing Secret -> SLACK_SIGNING_SECRET
   - Verification Token -> SLACK_VERIFICATION_TOKEN
3. Paste these into your .env using the template at the top of this file.

---



=======================================================================
2. GMAIL API SETUP
=======================================================================

---
Step 1: Create Google Cloud Project
---
1. Go to https://console.cloud.google.com/
2. Sign in with your Google account.
3. Click the project selector at the top -> "NEW PROJECT".
4. Set a project name (e.g. Gmail Extractor or Workforce Agent).
5. Click "CREATE" and wait for the project to be ready.
6. Ensure the new project is selected in the top dropdown.

---
Step 2: Enable Gmail API
---
1. In the left sidebar, go to "APIs & Services" -> "Library".
2. Search for "Gmail API".
3. Click "Gmail API" and then "ENABLE".

---
Step 3: Configure OAuth Consent Screen
---
1. Go to "APIs & Services" -> "OAuth consent screen".
2. Choose user type:
   - External (recommended for personal accounts), or
   - Internal (for Google Workspace organizations).
3. Fill in app info:
   - App name, support email, developer email.
4. On the Scopes page, you can click "Save and continue" – the
   actual Gmail scopes are specified in code (gmail.readonly,
   gmail.send, gmail.modify).
5. Add yourself (the Gmail address you’ll use) as a test user.
6. Complete the wizard and go back to the dashboard.

---
Step 4: Create OAuth Client Credentials
---
1. Go to "APIs & Services" -> "Credentials".
2. Click "+ CREATE CREDENTIALS" -> "OAuth client ID".
3. Choose "Desktop app" as the application type (for CLI / local use).
4. Give it a name (e.g. Gmail Desktop Client).
5. Click "CREATE".
6. In the popup, click "DOWNLOAD JSON" and save the file.

---
Step 5: Place Credentials and Configure Paths
---
1. Rename the downloaded file to something like
   gmail_credentials.json.
2. Move it into your project (recommended path):
   - `credentials/gmail_credentials.json`
3. In .env, set (matching the template above):
   - GMAIL_CREDENTIALS_FILE=credentials/gmail_credentials.json
   - GMAIL_TOKEN_FILE=data/gmail_token.pickle




=======================================================================
3. NOTION API SETUP
=======================================================================


---
Step 1: Create a Notion Integration
---
1. Go to https://www.notion.so/my-integrations
2. Sign in to your Notion account.
3. Click "+ New integration".
4. Set:
   - Name: e.g. Workforce Agent or Workspace Agent
   - Workspace: choose the workspace where the agent will export data
   - Type: keep as Internal integration
5. Click "Submit".

6. After creation, find the Internal Integration Token:
   - Starts with secret_ or ntn_.
   - Click "Show" then "Copy".
7. Add to .env using the template at the top of this file:
   - NOTION_TOKEN=secret_your-notion-token-here

---
Step 2: Choose Parent Page and Get Page ID
---
The parent page is where the agent will create child pages / exports.

1. In Notion, open or create the page you want as the export root.
2. Click "Share" -> "Copy link".
3. The URL will look like one of:
   - https://www.notion.so/Page-Name-1234567890abcdef1234567890abcdef
   - or with dashes inside the ID.
4. Extract the page ID (last 32 characters, ignoring dashes if present).
5. Put that ID into .env:
   - NOTION_PARENT_PAGE_ID=your-parent-page-id


---
Step 3: Share the Page with the Integration (CRITICAL)
---
1. Open the parent page in Notion.
2. Click the "..." (three dots) menu or "Share" / "Connections"
   in the top-right (UI may vary slightly by version).
3. Choose "Add connections".
4. Search for your integration name (e.g. Workforce Agent).
5. Add it and ensure it has full access to the page.
6. Repeat for any additional databases or pages the agent should access.

7. You can also manage access from the integration settings:
   - Open your Notion integration (Settings -> Integrations, then select it).
   - Go to the Access tab.
   - Click "Edit access" and add the pages or databases you want the agent
     to use.
   - Make sure the permission for those pages is set to "Can edit" so the
     agent can create and update content in those parts of the workspace.

